# Brainworks Property management software

### Project Structure

- `/client`: all the front end, currently only have `/webapp`
- `/server`: backend

### Pre-requisite

- Node v22
- Postgres 16

### Tech stack

- Vite / React
- Node / Express
- Drizzle / Postgres
- npm (package manager)

### Backend Code structure

- 3 layer architecture
  - Route
    - all the api routes
  - Controller
    - it can be also call handler
    - no buisness logic should be in controller
    - should be used as an ochestation, directing different request to different services
  - Service
    - contain all the buisness logic
  - DAL ( Data Access Layer)
    - DAO or DTO can be store here
    - since this is a set of standalone functions for db queries, calling DAL will be easier because DTO and DAO are both objects
- feature grouping

##### File and Folder structure in server

```
├── api
│   ├── [featureName]
│   |   ├── routes.ts         // all the different routes belongs to the
│   |   ├── controller.ts     // Orchestration ( get request from routes and assigned to different services)
│   |   ├── service.ts        // all the buisness logic feature
│   |   ├── dal.ts            // data access layer - for DAO and DTO
│   │   ├── type.ts           // all the types used in the feature
├── middleware                              // general middlware (i.e auth)
├── utils                                   // general utills functions
├── tests
│   ├── [feature].test.ts                   // testing the services file for each feature
├── db
│   ├── schema                              // all the model from database
│   ├── index.js
│   ├── migrations                          // all migration files generated by drizzle
├── index.ts
└──
```

### How to launch the app

1. Set up database and add database url in env file (only do once)
2. install packages in both client and server folder with `npm install`
3. run `npm run dev`
   - it will trigger front and backend with concurrently

### How to create migration

- Option 1: `npx drizzle-kit push` (do both generate and migrate)

- Option 2: `npx drizzle-kit generate` then `npx drizzle-kit migrate`

## Testing

### Coding Guidelines (Server)
